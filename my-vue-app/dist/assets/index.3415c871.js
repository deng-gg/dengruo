var e=Object.assign;import{d as a,b as l,u as t,e as n,f as s,g as o,r as u,o as c,c as i,a as r,w as d,F as m,h as f,i as p,t as h,j as v,k as b,K as C,l as k,T as x}from"./index.ab5f58c1.js";var g=a({setup(){const e=l(),a=t(),u=e.state.userInfo.userName,{ctx:c}=o();n([]);return{cachedMenu:s((()=>e.state.userInfo.cachedMenu)),clickRoute:e=>{a.push(e)},userName:u,removeTab:a=>{e.state.userInfo.cachedMenu.map(((l,t)=>{l.name===a&&e.state.userInfo.cachedMenu.splice(t,1)}))},tabClick:l=>{console.log("ctx.$router.currentRoute.value.fullPath",c.$router.currentRoute.value),e.state.userInfo.cachedMenu.map(((t,n)=>{t.name==l.props.name&&(e.dispatch("asyncgetdefaultActive",t.defaultActiveIndex),a.push(t.path))}))},matchedArr:s((()=>{let e=[],a=[];return c.$router.currentRoute.value.matched.filter(((a,l,t)=>{if(a.meta.title){const l=a.meta.title;e.push(l)}})),e.filter(((e,l,t)=>{a.includes(e)||a.push(e)})),a}))}}});const _={class:"nav"},y={class:"item1"},I={class:"item2"};g.render=function(e,a,l,t,n,s){const o=u("el-breadcrumb-item"),v=u("el-breadcrumb"),b=u("el-button"),C=u("el-tab-pane"),k=u("el-tabs");return c(),i("div",null,[r("div",_,[r("div",y,[r(v,{separator:"/",style:{"margin-top":"3px"}},{default:d((()=>[(c(!0),i(m,null,f(e.matchedArr,((e,a)=>(c(),i(o,{key:a},{default:d((()=>[p(h(e),1)])),_:2},1024)))),128))])),_:1})]),r("div",I,[r(b,{type:"text"},{default:d((()=>[p(h(e.userName),1)])),_:1})])]),r("div",null,[r(k,{modelValue:e.$route.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.$route.name=a),type:"card",closable:"",onTabRemove:e.removeTab,onTabClick:e.tabClick,size:"mini"},{default:d((()=>[(c(!0),i(m,null,f(e.cachedMenu,((e,a)=>(c(),i(C,{key:a,label:e.name,name:e.name},{default:d((()=>[p(h(e.content),1)])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","onTabRemove","onTabClick"])])])};var T=a({setup(){const a=l(),n=v(!1);v("1-1");const o=t(),u=a.state.userInfo.menusTree;return b((()=>{console.log("menusTree",a.state.userInfo)})),{isCollapse:n,handleOpen:e=>{console.log(e)},handleClose:(e,a)=>{console.log(e,a)},clickRoute:(l,t)=>{0==a.state.userInfo.cachedMenu.filter((e=>l.name===e.name)).length&&a.dispatch("addKeepAlive",e(e({},l),{defaultActiveIndex:t})),console.log("item",l),a.dispatch("asyncClickRoute",l),o.push(l.path)},menusTree:u,defaultActive:s((()=>a.state.userInfo.defaultActive))}}});const A={class:"Menu"},R={class:"menu"},M=r("i",{class:"el-icon-user"},null,-1),O={class:"footer"};T.render=function(e,a,l,t,n,s){const o=u("el-menu-item"),v=u("el-menu-item-group"),b=u("el-submenu"),C=u("el-menu"),k=u("el-button");return c(),i("div",A,[r("div",R,[r(C,{uniqueOpened:!0,"default-active":e.defaultActive,class:"el-menu-vertical-demo",onOpen:e.handleOpen,onClose:e.handleClose,"background-color":"#2e3035","text-color":"#fff","active-text-color":"#ffd04b",collapse:e.isCollapse,"collapse-transition":!0,style:{height:"calc(100vh - 40px)"}},{default:d((()=>[(c(!0),i(m,null,f(e.menusTree,((a,l)=>(c(),i(b,{key:l,index:l+1},{title:d((()=>[M,r("span",null,h(a.name||"123"),1)])),default:d((()=>[r(v,null,{default:d((()=>[(c(!0),i(m,null,f(a.children,((a,t)=>(c(),i(o,{index:l+1+"-"+(t+1),onClick:n=>e.clickRoute(a,l+1+"-"+(t+1)),key:t},{default:d((()=>[p(h(a.name),1)])),_:2},1032,["index","onClick"])))),128))])),_:2},1024)])),_:2},1032,["index"])))),128))])),_:1},8,["default-active","onOpen","onClose","collapse"])]),r("div",O,[r(k,{icon:e.isCollapse?"el-icon-s-unfold":"el-icon-s-fold",onClick:a[1]||(a[1]=a=>e.isCollapse=!e.isCollapse),size:"medium"},null,8,["icon"])])])};const $={},j={style:{width:"100%",height:"100%"}};$.render=function(e,a){const l=u("router-view");return c(),i("div",j,[r(x,{name:"el-zoom-in-top"},{default:d((()=>[r(l,null,{default:d((({Component:e})=>[(c(),i(C,null,[(c(),i(k(e)))],1024))])),_:1})])),_:1})])};export{g as _,T as a,$ as b};
